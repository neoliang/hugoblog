---
title: 光与影（0）-开篇	
date: "2021-10-24"
url: "/posts/light_shadow1"
description: "讲述光照的计算"
thumbnail: "preview_images/thumbs/ray_tracing.jpg"
image: "img/ray_tracing/head.jpg"
classes:
- feature-figcaption
- feature-figcaption-hidden
- feature-math
- feature-ace
categories:
- 光照
- 阴影
---
光与影像是一对孪生兄弟，有光的地方一定会有影，有影的地方一定会有光。光是什么，它是怎么传输的，什么是颜色，人眼是怎么感知颜色的？这些问题一直困扰着人类，或者从人类有记忆时开时，就有了对光思考和探索，它蕴含着浩瀚宇宙的奥秘，启发了艺术、宗教及科学。千百年来，这个地球上无数颗聪明的头脑被光神秘的气质所吸引，试图解开它的奥秘，在物理学领域，在对光的本质的研究和探索过程中，诞生了数十个诺贝尔获奖者。
<!--more-->

## 什么是光

什么是光，这问题并不好回答？2000多年前希腊数学家欧几里得曾提出我们之所以能看到东西是因为眼睛发出了光然后感受到了物体的存在，在今天看来，这个理论或者显得有些幼稚和可笑。但历史上对光生产过误解的科学家其实挺多的，包含牛顿，牛顿曾经认为光从空气传播到水中受到某种力，产生加速从而发生折射现象。
要真正理解光的本质，需要理解几何光学，电磁学，甚至量子力学。在计算机渲染领域中，人们比较关心光的传输（例如反射、折射与散射等）及对光的视觉显示（这涉及到颜色的表示、物体的材质等），但实现真实是光照效果一直是个难题，虽然1985年kajia就提出了渲染方程，从物理学的角度准确的描述光线的传输及与物体表面的作用。一方面渲染方程是一个多维积分，基本无法以直接求出通解。就算是一些近似求解，例如路径追踪，仍受限于图形处理机的算力直到近几年才在实时渲染领域有所应用；另一方面是物体材质属性很难找到精确通用的表达试，虽然人们提出过lambert、blin-phon等模型，但这些大多数是基于经验，需要艺术家对参数调校，并不能准确描述光照效果，很达到标准化，在游戏开发中，给工业化生产障碍，例如一个游戏关卡场景，美术调整好了白天的光照效果，但光照切换到黑夜，有可能还得再根据经验调整一次，这无疑提高了游戏的制作成本。2014年迪士尼提出了微表面模型，通过一些简单的参数，例如金属度、粗糙度等就可以描述出大多数材质，这个模型的计算开销并不大，如今已经被大多数游戏引擎例如unreal与unity使用。

## 光照的计算

求解渲染方程是比较困难的，在离线渲染领域，多半使用光线追踪这样比较精确但计算复杂度较高的算法来实现，例如路径追踪。而在实时渲染领域，大多是采用一些计算复杂度比较低的技巧来近似，这些方法大多数单独考虑了光照或者阴影，例如著名的球谐光照、unreal的split-sum方法就是光照效果近似，而shadowmap、ssao就是对阴影的近似，实时渲染领域中通常会将多种方法一起使用。

## 漫反射

{{<math >}} f(x)=kx \theta {{</math>}}

在光照的计算中，最简单的或许是漫反射的计算了，漫反射是指一个点从任意角度观察都相同，观察到的出射光照的强度与入射光强度及入射光方向与法线的夹角余弦成正比，用公式来描述：{{<math>}} L_o=L_i*cos(\theta) = L_i*\vec l \cdot \vec n {{</math>}}

## 阴影

- sdf下的软阴影
- shadowmap
	- pcf
	- pcss
	- vsm

## 环境光

## 高光

