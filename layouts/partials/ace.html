{{ $id := .id }}
{{ $height := .height }}

<style type="text/css">
  
.caret {
  text-align: left;
  cursor: pointer;
  -webkit-user-select: none; /* Safari 3.1+ */
  -moz-user-select: none; /* Firefox 2+ */
  -ms-user-select: none; /* IE 10+ */
  user-select: none;

}

.caret::before {
  content: "\25B6";
  color: black;
  display: inline-block;
  margin-right: 6px;
  transform: rotate(90deg);
}

.caret-down::before {
  -ms-transform: rotate(0deg); /* IE 9 */
  -webkit-transform: rotate(0deg); /* Safari */'
  transform: rotate(0deg);  
}

</style>

<span class="caret" id="caret_{{$id}}" style="color: #357edd;" >隐藏代码</span>

<div id="{{$id}}" style="max-width: 100%; height: 360px;border: 1px solid lightgray;"></div>

<script src="/js/ace.min/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
  var editor = ace.edit("{{$id}}",{
    theme: "ace/theme/github"});
  editor.session.setMode("ace/mode/javascript");
  editor.setShowPrintMargin(false);
  ContentFit("#{{$id}}",{{$height}});
  $("#caret_{{$id}}").on('click',(e)=>{
    var v = $("#{{$id}}").css('display')
    if(v === 'none')
    {
      $("#{{$id}}").css('display','block')
      $("#caret_{{$id}}").removeClass('caret-down')
      $("#caret_{{$id}}").text("隐藏代码")
    }
    else
    {
      $("#{{$id}}").css('display','none')
      $("#caret_{{$id}}").addClass('caret-down')
      $("#caret_{{$id}}").text("显示代码")
    }
  });
</script>